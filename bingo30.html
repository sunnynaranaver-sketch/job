<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™˜ê²½ ì§„ë¡œ ë¹™ê³  ê²Œì„ (4x4)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .bingo-cell {
            width: calc(25% - 8px); /* 4x4 ê·¸ë¦¬ë“œì— ë§ê²Œ ë„ˆë¹„ ì¡°ì • */
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            text-align: center;
            padding: 4px;
            word-break: keep-all;
        }
        .bingo-cell.marked {
            background-color: #fca5a5; /* Tailwind red-300 */
            color: white;
            text-decoration: line-through;
            transform: scale(0.95);
        }
        @media (max-width: 640px) {
            .bingo-cell {
                height: 60px;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-8 min-h-screen flex flex-col items-center justify-center">

    <div class="bg-white rounded-3xl shadow-xl p-8 md:p-12 max-w-4xl w-full text-center">
        <h1 class="text-3xl font-extrabold text-purple-600 mb-4">í™˜ê²½ ì§„ë¡œ ë¹™ê³  ê²Œì„ (4x4)</h1>
        <p class="text-lg text-gray-600 mb-6">
            ì•„ë˜ ì§ì—… 30ê°œ ì¤‘ 16ê°œë¥¼ ì„ íƒí•˜ì—¬ ë‚˜ë§Œì˜ ë¹™ê³ íŒì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.
            <br>ì„ íƒì´ ì™„ë£Œë˜ë©´ 'ë¹™ê³ íŒ ë§Œë“¤ê¸°' ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
        </p>

        <!-- ì§ì—… ì„ íƒ ì„¹ì…˜ -->
        <div id="job-selection" class="flex flex-wrap justify-center gap-2 mb-6">
            <!-- ì§ì—… ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ë¹™ê³ íŒ ë§Œë“¤ê¸° ë²„íŠ¼ -->
        <button id="create-bingo-btn" onclick="createBingoBoard()" disabled
            class="bg-gray-400 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-colors duration-200">
            ë¹™ê³ íŒ ë§Œë“¤ê¸°
        </button>

        <!-- ë¹™ê³  ê²Œì„ ì„¹ì…˜ (ìˆ¨ê²¨ì ¸ ìˆìŒ) -->
        <div id="bingo-game-section" class="hidden mt-8">
            <p class="text-lg font-bold text-gray-700 mb-4">ì„ ìƒë‹˜ì´ ë¶€ë¥´ëŠ” ì§ì—…ì„ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”!</p>
            <div id="bingo-board" class="flex flex-wrap justify-center gap-2 p-4 bg-purple-100 rounded-xl shadow-inner">
                <!-- ë¹™ê³ íŒ ì…€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            <div id="game-status" class="mt-4 text-xl font-bold text-green-600"></div>
        </div>
    </div>

    <script>
        // í™˜ê²½ ê´€ë ¨ 30ê°œ ì§ì—… ëª©ë¡
        const allJobs = [
            'ê¸°í›„ì ì‘ ì»¨ì„¤í„´íŠ¸', 'í•´ì–‘ ì‚°ì„±í™” ëª¨ë‹ˆí„°ë§ ì „ë¬¸ê°€', 'ìˆ˜ì§ë†ì¥ ê´€ë¦¬ì', 'ìŠ¤ë§ˆíŠ¸ì‹œí‹° ê¸°í›„ ê´€ë¦¬ì', 
            'ìˆ˜ì†Œ ì—°ë£Œ ì „ì§€ ê¸°ìˆ ì', 'íƒ„ì†Œ í¬ì§‘ ê¸°ìˆ ì', 'í™˜ê²½ AI ê°œë°œì', 'ë°”ì´ì˜¤í”Œë¼ìŠ¤í‹± ê°œë°œì',
            'ìˆœí™˜ ê²½ì œ ë””ìì´ë„ˆ', 'ê¸°í›„ êµìœ¡ ê²Œì„ ê°œë°œì', 'ê¸°í›„ ë³µì› ë¶„ì„ê°€', 'ë‹´ìˆ˜í™” ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´',
            'ê³¤ì¶©ì–‘ì‹ ê¸°ìˆ ì', 'ë„ì‹œ ì—´ì„¬ ì™„í™” ì „ë¬¸ê°€', 'ì—ë„ˆì§€ ì €ì¥ ì‹œìŠ¤í…œ ì „ë¬¸ê°€', 'íƒ„ì†Œ ë°œìêµ­ ì¶”ì  ì „ë¬¸ê°€',
            'í™˜ê²½ ê·œì œ ë²•ë¥  ì „ë¬¸ê°€', 'ì¹œí™˜ê²½ ì œí’ˆ ì¸ì¦ í‰ê°€ì‚¬', 'ì§€ì†ê°€ëŠ¥í•œ ê±´ì¶• ì„¤ê³„ì‚¬', 'ì¬ìƒì—ë„ˆì§€ ì‹œìŠ¤í…œ ì„¤ì¹˜ ë° ìœ ì§€ë³´ìˆ˜ ê°œë°œì',
            'í™˜ê²½ ì˜í–¥ í‰ê°€ ì „ë¬¸ê°€', 'ìƒíƒœê´€ê´‘ ê¸°íšì', 'ê¸°í›„ê¸ˆìœµ ì „ë¬¸ê°€', 'ë…¹ìƒ‰ ê¸°ìˆ  ì—°êµ¬ì›',
            'íê¸°ë¬¼ ì—ë„ˆì§€í™” ì—°êµ¬ì›', 'ìŠ¤ë§ˆíŠ¸ ê·¸ë¦¬ë“œ ì—”ì§€ë‹ˆì–´', 'í™˜ê²½ ë²•ë¥  ì „ë¬¸ê°€', 'í™˜ê²½ ë‹¤íë©˜í„°ë¦¬ ì œì‘ì',
            'ì—…ì‚¬ì´í´ë§ ì•„í‹°ìŠ¤íŠ¸', 'ì¹œí™˜ê²½ ì œí’ˆ ë§ˆì¼€í„°'
        ];

        let selectedJobs = new Set();
        let bingoBoard = [];
        const boardSize = 4; // 4x4 ë³´ë“œ í¬ê¸°

        /**
         * ì§ì—… ì„ íƒ ë²„íŠ¼ì„ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
         */
        function initJobSelection() {
            const selectionContainer = document.getElementById('job-selection');
            selectionContainer.innerHTML = '';
            
            allJobs.forEach(job => {
                const button = document.createElement('button');
                button.textContent = job;
                button.className = "bg-gray-200 text-gray-800 py-2 px-4 rounded-full hover:bg-purple-300 transition-colors duration-200";
                button.onclick = () => toggleJobSelection(job, button);
                selectionContainer.appendChild(button);
            });
        }

        /**
         * ì§ì—… ì„ íƒ/ì„ íƒ í•´ì œë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
         * @param {string} job - ì„ íƒëœ ì§ì—…ëª…
         * @param {HTMLElement} button - í´ë¦­ëœ ë²„íŠ¼ ìš”ì†Œ
         */
        function toggleJobSelection(job, button) {
            const createBtn = document.getElementById('create-bingo-btn');

            if (selectedJobs.has(job)) {
                selectedJobs.delete(job);
                button.classList.remove('bg-purple-500', 'text-white');
                button.classList.add('bg-gray-200', 'text-gray-800');
            } else {
                if (selectedJobs.size < boardSize * boardSize) {
                    selectedJobs.add(job);
                    button.classList.remove('bg-gray-200', 'text-gray-800');
                    button.classList.add('bg-purple-500', 'text-white');
                } else {
                    // ì•Œë¦¼ ëŒ€ì‹  ë©”ì‹œì§€ í‘œì‹œ
                    alert(`${boardSize * boardSize}ê°œì˜ ì§ì—…ì„ ëª¨ë‘ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ë¹™ê³ íŒ ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.`);
                }
            }
            
            // 16ê°œ ì„ íƒ ì‹œ ë¹™ê³ íŒ ë§Œë“¤ê¸° ë²„íŠ¼ í™œì„±í™”
            if (selectedJobs.size === boardSize * boardSize) {
                createBtn.disabled = false;
                createBtn.classList.remove('bg-gray-400');
                createBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
            } else {
                createBtn.disabled = true;
                createBtn.classList.add('bg-gray-400');
                createBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            }
        }
        
        /**
         * ë¹™ê³ íŒì„ ìƒì„±í•˜ê³  í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
         */
        function createBingoBoard() {
            if (selectedJobs.size !== boardSize * boardSize) {
                // ì•Œë¦¼ ëŒ€ì‹  ë©”ì‹œì§€ í‘œì‹œ
                alert(`${boardSize * boardSize}ê°œì˜ ì§ì—…ì„ ì„ íƒí•´ì•¼ ë¹™ê³ íŒì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                return;
            }
            
            // Setì„ ë°°ì—´ë¡œ ë³€í™˜í•˜ê³  ë¬´ì‘ìœ„ë¡œ ì„ê¸°
            bingoBoard = Array.from(selectedJobs);
            for (let i = bingoBoard.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [bingoBoard[i], bingoBoard[j]] = [bingoBoard[j], bingoBoard[i]];
            }
            
            const boardContainer = document.getElementById('bingo-board');
            boardContainer.innerHTML = '';
            
            bingoBoard.forEach(job => {
                const cell = document.createElement('div');
                cell.textContent = job;
                cell.className = "bingo-cell bg-white text-gray-700 shadow-sm border border-purple-200 flex-grow-0";
                cell.onclick = () => markBingoCell(cell);
                boardContainer.appendChild(cell);
            });

            // ë¹™ê³  ê²Œì„ ì„¹ì…˜ ë³´ì´ê¸°
            document.getElementById('job-selection').classList.add('hidden');
            document.getElementById('create-bingo-btn').classList.add('hidden');
            document.getElementById('bingo-game-section').classList.remove('hidden');
        }

        /**
         * ë¹™ê³  ì…€ì„ í´ë¦­í•˜ì—¬ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
         * @param {HTMLElement} cell - í´ë¦­ëœ ë¹™ê³  ì…€ ìš”ì†Œ
         */
        function markBingoCell(cell) {
            cell.classList.toggle('marked');
            checkBingo();
        }

        /**
         * ë¹™ê³  ì™„ì„± ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
         */
        function checkBingo() {
            const boardCells = document.getElementById('bingo-board').children;
            let bingoCount = 0;

            // í–‰(Row) ì²´í¬
            for (let i = 0; i < boardSize; i++) {
                if (Array.from({length: boardSize}, (_, j) => boardCells[i * boardSize + j].classList.contains('marked')).every(Boolean)) {
                    bingoCount++;
                }
            }

            // ì—´(Column) ì²´í¬
            for (let j = 0; j < boardSize; j++) {
                if (Array.from({length: boardSize}, (_, i) => boardCells[i * boardSize + j].classList.contains('marked')).every(Boolean)) {
                    bingoCount++;
                }
            }

            // ëŒ€ê°ì„  ì²´í¬ (ì¢Œìƒë‹¨ -> ìš°í•˜ë‹¨)
            if (Array.from({length: boardSize}, (_, i) => boardCells[i * boardSize + i].classList.contains('marked')).every(Boolean)) {
                bingoCount++;
            }

            // ëŒ€ê°ì„  ì²´í¬ (ìš°ìƒë‹¨ -> ì¢Œí•˜ë‹¨)
            if (Array.from({length: boardSize}, (_, i) => boardCells[i * boardSize + (boardSize - 1 - i)].classList.contains('marked')).every(Boolean)) {
                bingoCount++;
            }

            const gameStatus = document.getElementById('game-status');
            if (bingoCount > 0) {
                gameStatus.textContent = `${bingoCount} ë¹™ê³  ì™„ì„±! ğŸ‰`;
            } else {
                gameStatus.textContent = '';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì§ì—… ì„ íƒ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', initJobSelection);
    </script>
</body>
</html>
